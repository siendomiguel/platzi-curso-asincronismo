<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Probando XMLHttp Request</title>
</head>
<body>
  <h1>Ejemplo de AJAX por XMLHTTPRequest</h1>
  <div id="respuesta">Aca va a estar la respuesta del AJAX</div>

  <script>

    const urlApi = 'ajax.php';
    
var xhttp = new XMLHttpRequest(); //referencia a new XMLHttpRequest

xhttp.open('GET', urlApi, true); //petición "obtener" con true para habilitarlo
xhttp.onreadystatechange = function(event) { //escucha diferentes estados de la solicitud y conocer cuando está disponible la información
  console.log('Cambiando Estado ' +xhttp.readyState);
  if(xhttp.readyState === 4) { //si el estado ha sido completada la llamada
    if(xhttp.status === 200 ){ //el servido responde de forma correcta
		  callback(null, JSON.parse(xhttp.responseText)); //dentro de xhttp.responseTex recibimos lo que entrega el servidor en texto y se hace la transformación en JSON
	  }
  } else {
	  const error = new Error('Error' + urlApi);
	  return callback(error,null); //es null porque no se está regresando ningún dato
  }
}
	xhttp.send();

  </script>
</body>
</html>